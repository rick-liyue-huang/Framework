<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        div, p {
            width: 100px;
            height: 100px;
            border: 1px solid red;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div id="dv"></div>
    <div class="div"></div>
    <div class="div"></div>
    <p></p>
<script>

    /*
    * 面向对象
    *   框架的应用 ---- 模仿jQuery 做一个框架
    *
    *   rickHuang.js
    *
    *   思路：
    *   1. 选择引擎，怎么将元素选出来
    *   2. dom 操作模块， 增--删
    *   3. 事件模块
    *   4. 属性模块
    *   5. 样式模块
    *   6. 动画模块
    *   7. 整合
    * */

//    选择器模块
//    传统的处理方式，就是使用函数
//    var get = function (tag) {
//        return document.getElementsByTagName(tag);
//    };
//    var divs = get('div');
//    var ps = get('p');
//    var i = 0;
//    for (i = 0; i < divs.length; i++) {
//        divs[i].style.backgroundColor = 'blue';
//    }
//    for (i = 0; i < ps.length; i++) {
//        ps[i].style.backgroundColor = 'purple';
//    }

    /*
    * w为什么不好？
    * 1.代码冗余， 复用， 容错低
    * 
    * => 函数化
    * */
    
//    var getTag = function (tag) {
//        return document.getElementsByTagName(tag);
//    };

//    var divs = getTag('div');
//    var ps = getTag('p');
    
//    两个循环，
//    var forEach = function (arr) {
//        for (var i = 0; i < arr.length; i++) {
//            arr[i].style.backgroundColor = 'red';
//        }
//    };
//    forEach(divs);
//    forEach(ps);

//    从 1.1 回到这里，使用新的each封装函数
//    var each = function (arr, fn) {
//        for (var i = 0; i < arr.length; i++) {
//            if (fn.call(arr[i], i, arr[i]) === false) {
//                break;
//            }
//        }
//    };
//
//    var getTag = function (tag, results) {
//        results = results || [];
//        results.push.apply(results, document.getElementsByTagName(tag));
//        return results;
//    };

//    var list1 = getTag('div');
//    var list2 = getTag('p');

//    var list = getTag('div');
//    list = getTag('p', list);
//    each(list1, function (i, v) {
//        this.style.backgroundColor = 'blue';
//    });
//    each(list2, function (i, v) {
//        this.style.backgroundColor = 'yellow';
//    });
//    each(list, function (i, v) {
//        this.style.backgroundColor = 'pink';
//    });


    // => 对 getTag 函数优化
//    如果利用get 方法获得多个元素的话，就会得到多个数组，为了简化开啊，可以考虑将其合并到一个数组中
//    调用多次get方法，如果想要一个数组就使用一个数组，想要多个数组，就得到多个数组

    /*
    * 通过 1.2， 我们得到完善的 获得元素的方法 get() 和 each()
    *
    * */



    var get = function (selector, results) {
        results = results || [];
        var rquickExp = /^(?:#([\w-]+)|\.([\w-]+)|([\w]+)|\*)$/,
                m = rquickExp.exec(selector);

        if (m) {
            if (m[1]) {
                results = getId(m[1], results);
            } else if (m[2]) {
                results = getClass(m[2], results);
            } else if (m[3]) {
                results = getTag(m[3], results);
            } else if (m[4]) {
                results = getTag(m[4], results);
            }
        }
        return results;
    };

    var getTag = function (tagName, results) {
        results = results || [];
        results.push.apply(results, document.getElementsByTagName(tagName));
        return results;
    };

    var getClass = function (className, results) {
        results = results || [];
        results.push.apply(results, document.getElementsByClassName(className));
        return results;
    };

    var getId = function (idName, results) {
        results = results || [];
        results.push(document.getElementById(idName));
        return results;
    };
    

    var each = function (arr, fn) {
        for (var i = 0; i < arr.length; i++) {
            if (fn.call(arr[i], i, arr[i]) === false) {
                 break;
            }
        }
    };

    each(get('#dv'), function () {
        this.style.backgroundColor = 'skyblue';
    });
    each(get('p'), function () {
        this.style.backgroundColor = 'purple';
    });
    each(get('.div'), function () {
        this.style.backgroundColor = 'yellow';
    });


    
    
    
</script>
</body>
</html>












