<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>

    //真正的框架封装,

    //    构造函数
    var rickH = function rickH(selector) {
        return new rickH.fn.init(selector);
    };

    //    核心原型
    rickH.fn = rickH.prototype = {
        constructor: rickH,
        selector: null,
        init: function (selector) {

            if (typeof selector === 'string') {

                if (selector.charAt(0) === '<') {
                    this.elements = parseHTML(selector);
                } else {
                    this.elements = select(selector);
                }
            }
            this.selector = selector; // 表明只要有selector 属性的对象就是 rickH 对象
        }
    };

//    原型链的调整
    rickH.fn.init.prototype = rickH.prototype;

    //    为了可扩展
    rickH.extend = rickH.fn.extend = function (obj) {
        // 将obj的成员加入到 this上面
        var k;
        for (k in obj) {
            this[k] = obj[k];
        }
    };

// 扩展方法，基本的工具方法
    rickH.extend({

        each: function (arr, fn) {
            var i, l = arr.length, isArray = rickH.isLikeArray(arr);
            if (isArray) {
                    // 数组
                for (i = 0; i < l; i++) {
                    if (fn.call(arr[i], i, arr[i]) === false) {
                        break;
                    }
                }
            } else {
                // 对象
                for(i in arr) {
                    if (fn.call(arr[i], i, arr[i]) === false) {
                        break;
                    }
                }
            }
            return arr;
        }

    });


    // 判断类型的方法
    rickH.extend({
        isFunction: function (obj) {
            return typeof obj === 'function';
        },
        isString: function (obj) {
            return typeof obj === 'string';
        },
        isLikeArray: function (obj) {
            return obj && obj.length && obj.length >= 0;
        },
        isRickH: function (obj) {
            return !!obj.selector;
        },
        isDOM: function (obj) {
            return !!obj.nodeType;
        }

    });








    var select = function (selector) {
        // 简单写法
        var first = selector.charAt(0);
        var arr = [];
        if (first === '#') {
            arr.push.call(arr, document.getElementById(selector.slice(1)));
        } else if (first === '.') {
            arr.push.apply(arr, document.getElementsByClassName(selector.slice(1)));
        } else {
            arr.push.apply(arr, document.getElementsByTagName(selector));
        }
        return arr;
    };

    var parseHTML = function (html) {
        var div = document.createElement('div');
        var arr = [], i;
        div.innerHTML = html;
        for (i = 0; i < div.childNodes.length; i++) {
            arr.push(div.childNodes[i]);
        }
        return arr;
    };

</script>

<script>
    var list1 = rickH('<div></div><p></p><a></a>');
    var list2 = rickH('body');
</script>
</body>
</html>


























